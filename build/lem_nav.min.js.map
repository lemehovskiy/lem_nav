{"version":3,"sources":["lem_nav.es6"],"names":["factory","define","amd","exports","module","require","jQuery","$","LemNav","element","options","_classCallCheck","this","self","nav","dropdowns","navbar_open","$navbar","settings","extend","navbar_toggle","collapse_duration","trigger","trigger_linked","extra_trigger_button","navbar_collapse_duration","navbar_animation","submenu_animation","mobileBreakPoint","state","isSubmenuOpen","currentOpenSubmenu","sizeMode","$submenuBackBtn","init","_createClass","key","value","set_dropdowns_data","is_touch_device","addClass","resize","resizeHandler","initBackToParent","window","click","isDesktop","close_all","forEach","dropdown","on","event","stopPropagation","open","console","log","close","close_other_branches","branch_id","openSubmenu","switchFadeSubmenu","hover","extra_trigger","openSubMenu","initNavbarCollapse","resizeTO","clearTimeout","setTimeout","width","updateSizeMode","resizeMode","find","prepend","currentMenuLv","menu_lv","currentMenuBranchID","submenu","closeFadeSubmenu","tl","TimelineLite","to","scale","opacity","onComplete","nav_item","removeClass","get_submenu","nested_submenu","$nav_item","menu","menu_items","each","push","index","sub_menu","current_branch_id","navbar_trigger","closeNavbar","openNavbar","TweenLite","fromTo","autoAlpha","y","set","height","from","$trigger","append","dropdown_shown","currentDropdown","current_menu_height","outerHeight","dropdown_hidden","document","createEvent","e","fn","lemNav","$this","opt","arguments","args","Array","prototype","slice","call","length","i","ret","_typeof","lem_nav","apply"],"mappings":"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","file":"lem_nav.min.js","sourcesContent":[";(function (factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof exports !== 'undefined') {\n        module.exports = factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n})\n\n(function ($) {\n    'use strict';\n\n    class LemNav {\n\n        constructor(element, options) {\n\n            let self = this;\n\n            self.nav = {};\n\n            self.nav.dropdowns = [];\n\n            self.nav.navbar_open = false;\n\n            self.$navbar = $(element);\n\n            self.settings = $.extend({\n                navbar_toggle: '.lem-navbar-toggle',\n                collapse_duration: 0.2,\n                trigger: 'click',\n                trigger_linked: false,\n                extra_trigger_button: \"<button class='extra-trigger'><i class='icon icon-down-open-big'></i></button>\",\n                navbar_collapse_duration: 0.5,\n                navbar_animation: 'shift',\n                submenu_animation: 'fade',\n                mobileBreakPoint: 800\n\n            }, options);\n\n            self.state = {\n                isSubmenuOpen: false,\n                currentOpenSubmenu: null,\n                sizeMode: null\n            }\n\n            self.$submenuBackBtn = null;\n\n            self.init();\n        }\n\n        init() {\n            let self = this;\n\n            this.set_dropdowns_data();\n\n            if (self.is_touch_device()) {\n                $('body').addClass('is-touch');\n            }\n\n            this.resize();\n            this.resizeHandler();\n\n            if (self.settings.submenu_animation == 'fade') {\n                self.initBackToParent();\n            }\n\n            if (self.settings.trigger == 'click') {\n                self.$navbar.addClass('trigger-click');\n\n                $(window).click(function () {\n                    if (self.isDesktop()) {\n                        self.close_all();\n                    }\n                });\n\n                self.nav.dropdowns.forEach(function (dropdown) {\n\n                    dropdown.trigger.on('click', function (event) {\n\n                        event.stopPropagation();\n\n                        if (self.isDesktop()) {\n                            if (dropdown.open) {\n\n                                console.log('close');\n                                self.close({\n                                    dropdown: dropdown\n                                })\n                            }\n                            else {\n                                self.close_other_branches(dropdown.branch_id);\n                                console.log('open');\n\n                                self.openSubmenu({\n                                    dropdown: dropdown\n                                })\n                            }\n                        }\n                        else {\n                            self.switchFadeSubmenu({\n                                dropdown: dropdown\n                            });\n                        }\n                    })\n                })\n            }\n\n            else if (self.settings.trigger == 'hover' && !(self.is_touch_device())) {\n                self.nav.dropdowns.forEach(function (dropdown) {\n                    dropdown.trigger.hover(\n                        function () {\n                            self.openSubmenu({\n                                dropdown: dropdown\n                            })\n                        },\n                        function () {\n                            self.openSubmenu({\n                                dropdown: dropdown\n                            })\n                        }\n                    )\n                })\n            }\n\n            if (self.settings.trigger_linked) {\n                self.nav.dropdowns.forEach(function (dropdown) {\n                    dropdown.extra_trigger.on('click', function (event) {\n\n                        event.stopPropagation();\n                        if (dropdown.openSubmenu) {\n\n                            self.close({\n                                dropdown: dropdown\n                            })\n                        }\n                        else {\n\n                            self.close_other_branches(dropdown.branch_id);\n                            self.openSubMenu({\n                                dropdown: dropdown\n                            })\n                        }\n                    })\n                })\n\n            }\n\n            self.initNavbarCollapse();\n        }\n\n        resizeHandler() {\n            let self = this;\n            $(window).resize(function () {\n                if (this.resizeTO) clearTimeout(this.resizeTO);\n\n                this.resizeTO = setTimeout(function () {\n                    self.resize();\n                }, 500);\n            });\n        }\n\n        resize(){\n            let ww = $(window).width();\n\n            if (ww > this.settings.mobileBreakPoint) {\n                this.updateSizeMode('desktop');\n            }\n            else {\n                this.updateSizeMode('mobile');\n            }\n        }\n\n        updateSizeMode(resizeMode) {\n            if (resizeMode != this.state.sizeMode) {\n                this.state.sizeMode = resizeMode;\n                this.close_all();\n            }\n        }\n\n        isDesktop() {\n            return $(window).width() > this.settings.mobileBreakPoint;\n        }\n\n        initBackToParent() {\n            let self = this;\n\n            self.$submenuBackBtn = $('<li class=\"sub-menu-back-btn\">Back</li>');\n            self.$navbar.find('.nav').prepend(self.$submenuBackBtn);\n\n            self.$submenuBackBtn.on('click', function () {\n\n                let currentMenuLv = self.state.currentOpenSubmenu.menu_lv;\n                let currentMenuBranchID = self.state.currentOpenSubmenu.branch_id;\n\n                // console.log(currentMenuLv);\n                // console.log(currentMenuBranchID);\n\n                if (currentMenuLv > 1) {\n                    // console.log(currentMenuLv);\n                    // console.log(currentMenuBranchID);\n\n                    self.nav.dropdowns.forEach(function (submenu) {\n                        if (submenu.branch_id == currentMenuBranchID && submenu.menu_lv == currentMenuLv - 1) {\n                            self.switchFadeSubmenu({\n                                dropdown: submenu\n                            })\n                        }\n                    })\n                }\n                else {\n                    self.closeFadeSubmenu();\n                }\n            })\n        }\n\n        closeFadeSubmenu() {\n            let self = this;\n\n            let tl = new TimelineLite();\n            tl.to(self.$navbar, 0.2, {\n                scale: 1.02, opacity: 0, onComplete: function () {\n\n                    self.nav.dropdowns.forEach(function (submenu) {\n                        if (submenu.open) {\n                            submenu.open = false;\n                            submenu.nav_item.removeClass('open');\n                        }\n                    })\n\n                    self.$navbar.removeClass('submenu-open');\n                }\n            });\n            tl.to(self.$navbar, 0.2, {\n                scale: 1, opacity: 1\n            });\n\n        }\n\n\n        set_dropdowns_data() {\n            let self = this;\n\n            self.$navbar.find('.nav >.menu-item-has-children').each(function (index) {\n\n                let sub_menu = get_submenu(\n                    {\n                        $nav_item: $(this),\n                        menu_lv: 1,\n                        branch_id: index\n                    }\n                );\n                self.nav.dropdowns.push(sub_menu);\n            });\n\n\n            function get_submenu(options) {\n                let nested_submenu = {\n                    nav_item: options.$nav_item,\n                    trigger: options.$nav_item,\n                    menu: options.$nav_item.find('>.sub-menu'),\n                    menu_items: options.$nav_item.find('>.sub-menu >li'),\n                    menu_lv: options.menu_lv,\n                    branch_id: options.branch_id,\n                    open: false\n                }\n\n\n                if (self.settings.trigger_linked) {\n                    nested_submenu.extra_trigger = self.extra_trigger(options.$nav_item)\n                }\n\n                options.$nav_item.find('>.sub-menu >.menu-item-has-children').each(function () {\n                    self.nav.dropdowns.push(get_submenu(\n                        {\n                            $nav_item: $(this),\n                            menu_lv: options.menu_lv + 1,\n                            branch_id: options.branch_id\n                        })\n                    )\n                });\n\n                return nested_submenu\n            }\n        }\n\n        close_other_branches(current_branch_id) {\n            let self = this;\n            \n            self.nav.dropdowns.forEach(function (submenu) {\n                if (submenu.open && !(submenu.branch_id == current_branch_id)){\n                    console.log(submenu.branch_id + '--' + current_branch_id);\n\n                    self.close({\n                        dropdown: submenu\n                    })\n                }\n            })\n        }\n\n        initNavbarCollapse() {\n            let self = this;\n\n            self.nav.navbar_trigger = $(self.settings.navbar_toggle);\n\n            self.nav.navbar_trigger.on('click', function () {\n                if (self.nav.navbar_open) {\n                    self.closeNavbar();\n                }\n\n                else {\n                    self.openNavbar();\n                }\n            })\n        }\n\n        openNavbar() {\n            let self = this;\n\n            switch (self.settings.navbar_animation) {\n                case 'shift':\n                    TweenLite.fromTo(self.$navbar, self.settings.navbar_collapse_duration,\n                        {autoAlpha: 0, y: 20},\n                        {autoAlpha: 1, y: 0}\n                    )\n                    break;\n\n                case 'collapse':\n                    TweenLite.set(self.$navbar, {height: \"auto\"})\n                    TweenLite.from(self.$navbar, self.settings.navbar_collapse_duration, {height: 0})\n                    break;\n            }\n\n\n            self.nav.navbar_open = true;\n            self.nav.navbar_trigger.addClass('open');\n        }\n\n        closeNavbar() {\n            let self = this;\n\n            self.close_all();\n\n            switch (self.settings.navbar_animation) {\n                case 'shift':\n                    TweenLite.to(self.$navbar, self.settings.navbar_collapse_duration,\n                        {\n                            autoAlpha: 0, y: 20, onComplete: function () {\n                            self.$navbar.removeClass('submenu-open');\n                        }\n                        }\n                    )\n                    break;\n\n                case 'collapse':\n                    TweenLite.to(self.$navbar, self.settings.navbar_collapse_duration, {height: 0})\n                    break;\n            }\n\n            self.nav.navbar_open = false;\n            self.nav.navbar_trigger.removeClass('open');\n        }\n\n        extra_trigger($nav_item) {\n            let self = this;\n\n\n            let $trigger = $(self.settings.extra_trigger_button);\n\n            $nav_item.append($trigger);\n\n            return $trigger;\n        }\n\n        switchFadeSubmenu(options) {\n            let self = this;\n            let currentDropdown = options.dropdown;\n\n            if (!self.state.isSubmenuOpen) {\n                self.state.isSubmenuOpen = true;\n            }\n\n            // if (currentDropdown.menu_lv > 1) {\n            self.nav.dropdowns.forEach(function (dropdown) {\n                if (currentDropdown.branch_id == dropdown.branch_id && dropdown.menu_lv < currentDropdown.menu_lv) {\n                    dropdown.nav_item.addClass('nested-menu-open');\n                }\n                else {\n                    dropdown.nav_item.removeClass('nested-menu-open');\n                }\n            })\n            // }\n\n            let tl = new TimelineLite();\n            tl.to(self.$navbar, 0.2, {\n                scale: 1.02, opacity: 0, onComplete: function () {\n\n                    self.$navbar.addClass('submenu-open');\n                    self.nav.dropdowns.forEach(function (submenu) {\n                        submenu.nav_item.removeClass('open');\n                        submenu.open = true;\n                    })\n\n                    dropdown_shown();\n                }\n            });\n            tl.to(self.$navbar, 0.2, {\n                scale: 1, opacity: 1\n            });\n\n\n            function dropdown_shown() {\n                currentDropdown.menu.trigger('shown.lnav')\n                currentDropdown.menu.trigger('show.lnav');\n\n                currentDropdown.open = true;\n                currentDropdown.nav_item.addClass('open');\n\n                self.state.currentOpenSubmenu = currentDropdown;\n            }\n        }\n\n        openSubmenu(options) {\n            let self = this;\n            let dropdown = options.dropdown;\n            let current_menu_height = dropdown.menu.outerHeight();\n\n\n            TweenLite.set(dropdown.menu, {height: \"auto\"})\n            TweenLite.from(dropdown.menu, self.settings.collapse_duration, {\n                height: current_menu_height,\n                onComplete: dropdown_shown\n            })\n\n            dropdown.menu.trigger('show.lnav');\n\n            dropdown.open = true;\n            dropdown.nav_item.addClass('open');\n\n            function dropdown_shown() {\n                dropdown.menu.trigger('shown.lnav')\n            }\n        }\n\n        close_all() {\n            let self = this;\n\n            console.log('close-all');\n\n            self.nav.dropdowns.forEach(function (submenu) {\n                if (submenu.open) {\n                    self.close({\n                        dropdown: submenu\n                    })\n                    submenu.open = false;\n                    submenu.nav_item.removeClass('open');\n                }\n            })\n            self.$navbar.removeClass('submenu-open');\n        }\n\n        close(options) {\n            let self = this;\n            let dropdown = options.dropdown;\n\n            TweenLite.to(dropdown.menu, self.settings.collapse_duration, {\n                height: 0,\n                onComplete: dropdown_hidden\n            })\n\n            dropdown.menu.trigger('hide.lnav');\n\n            dropdown.open = false;\n            dropdown.nav_item.removeClass('open');\n\n            function dropdown_hidden() {\n                dropdown.menu.trigger('hidden.lnav');\n            }\n        }\n\n        is_touch_device() {\n            try {\n                document.createEvent(\"TouchEvent\");\n                return true;\n            } catch (e) {\n                return false;\n            }\n        };\n    }\n\n\n    $.fn.lemNav = function () {\n        let $this = this,\n            opt = arguments[0],\n            args = Array.prototype.slice.call(arguments, 1),\n            length = $this.length,\n            i,\n            ret;\n        for (i = 0; i < length; i++) {\n            if (typeof opt == 'object' || typeof opt == 'undefined')\n                $this[i].lem_nav = new LemNav($this[i], opt);\n            else\n                ret = $this[i].lem_nav[opt].apply($this[i].lem_nav, args);\n            if (typeof ret != 'undefined') return ret;\n        }\n        return $this;\n    };\n\n\n});"]}