{"version":3,"sources":["wp_nav.es6"],"names":["factory","define","amd","exports","module","require","jQuery","$","WpNav","element","options","_classCallCheck","this","self","nav","dropdowns","navbar_open","$navbar","settings","extend","navbar_toggle","collapse_duration","trigger","trigger_linked","extra_trigger_button","navbar_collapse_duration","on_dropdown_shown","on_dropdown_hide","init","_createClass","key","value","find","each","$this","push","menu","menu_items","open","forEach","dropdown","menu_items_tl","TimelineMax","paused","staggerFrom","autoAlpha","length","extra_trigger","window","click","close_all","on","event","stopPropagation","close","hover","navbar_collapse","navbar_trigger","TweenLite","to","height","removeClass","set","from","addClass","$button","append","dropdown_shown","current_menu_height","outerHeight","onComplete","timeScale","play","reverse","fn","wpNav","opt","arguments","args","Array","prototype","slice","call","i","ret","_typeof","wp_nav","apply"],"mappings":"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","file":"wp_nav.min.js","sourcesContent":[";(function (factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof exports !== 'undefined') {\n        module.exports = factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n})\n\n(function ($) {\n    'use strict';\n\n    class WpNav {\n\n        constructor(element, options) {\n\n            let self = this;\n\n            self.nav = {};\n\n            self.nav.dropdowns = [];\n\n            self.nav.navbar_open = false;\n\n            self.$navbar = $(element);\n\n            self.settings = $.extend({\n                navbar_toggle: '.wp-navbar-toggle',\n                collapse_duration: 0.2,\n                trigger: 'click',\n                trigger_linked: false,\n                extra_trigger_button: \"<button class='extra-trigger'>+</button>\",\n                navbar_collapse_duration: 0.5,\n                on_dropdown_shown: function () {\n                },\n                on_dropdown_hide: function () {\n                }\n\n            }, options);\n\n            self.init();\n        }\n\n        init() {\n            let self = this;\n\n            self.$navbar.find('.menu-item-has-children').each(function () {\n                let $this = $(this);\n\n                self.nav.dropdowns.push({\n                    trigger: $this,\n                    menu: $this.find('>.sub-menu'),\n                    menu_items: $this.find('>.sub-menu >li'),\n                    open: false\n                });\n            })\n\n\n            self.nav.dropdowns.forEach(function (dropdown) {\n\n                dropdown.menu_items_tl = new TimelineMax({\n                    paused: true\n                });\n\n\n                dropdown.menu_items_tl.staggerFrom(\n                    dropdown.menu_items,\n                    self.settings.collapse_duration,\n                    {\n                        autoAlpha: 0\n                    }, self.settings.collapse_duration / dropdown.menu_items.length)\n\n            })\n\n\n            if (self.settings.trigger_linked) {\n                self.extra_trigger();\n            }\n\n            if (self.settings.trigger == 'click') {\n                $(window).click(function () {\n                    self.close_all();\n                });\n                self.nav.dropdowns.forEach(function (dropdown) {\n                    dropdown.trigger.on('click', function (event) {\n                        event.stopPropagation();\n                        if (dropdown.open) {\n                            self.close({\n                                dropdown: dropdown\n                            })\n                        }\n                        else {\n                            self.close_all();\n                            self.open({\n                                dropdown: dropdown\n                            })\n                        }\n                    })\n                })\n            }\n\n            else if (self.settings.trigger == 'hover') {\n                self.nav.dropdowns.forEach(function (dropdown) {\n                    dropdown.trigger.hover(\n                        function () {\n                            self.open({\n                                dropdown: dropdown\n                            })\n                        },\n                        function () {\n                            self.close({\n                                dropdown: dropdown\n                            })\n                        }\n                    )\n                })\n            }\n\n\n            self.navbar_collapse();\n        }\n\n        close_all() {\n\n            let self = this;\n\n            self.nav.dropdowns.forEach(function (dropdown) {\n                if (dropdown.open) {\n                    self.close({\n                        dropdown: dropdown\n                    })\n                }\n            })\n        }\n\n        navbar_collapse() {\n            let self = this;\n\n            self.nav.navbar_trigger = $(self.settings.navbar_toggle);\n\n\n            self.nav.navbar_trigger.on('click', function () {\n                if (self.nav.navbar_open) {\n                    TweenLite.to(self.$navbar, self.settings.navbar_collapse_duration, {height: 0})\n\n                    self.nav.navbar_open = false;\n                    self.nav.navbar_trigger.removeClass('open');\n                }\n\n                else {\n                    TweenLite.set(self.$navbar, {height: \"auto\"})\n                    TweenLite.from(self.$navbar, self.settings.navbar_collapse_duration, {height: 0})\n\n                    self.nav.navbar_open = true;\n                    self.nav.navbar_trigger.addClass('open');\n                }\n            })\n        }\n\n        extra_trigger() {\n            let self = this;\n\n            self.nav.dropdowns.forEach(function (dropdown) {\n\n                let $button = $(self.settings.extra_trigger_button);\n\n                dropdown.trigger.append($button);\n\n                $button.on('click', function () {\n                    if (dropdown.open) {\n                        self.close({\n                            dropdown: dropdown\n                        })\n                    }\n                    else {\n                        self.open({\n                            dropdown: dropdown\n                        })\n                    }\n                })\n            })\n        }\n\n        open(options) {\n            let self = this;\n            let dropdown = options.dropdown;\n            let current_menu_height = dropdown.menu.outerHeight();\n\n            TweenLite.set(dropdown.menu, {height: \"auto\"})\n            TweenLite.from(dropdown.menu, self.settings.collapse_duration, {\n                height: current_menu_height,\n                onComplete: dropdown_shown\n            })\n\n            dropdown.menu_items_tl.timeScale(1.2);\n            dropdown.menu_items_tl.play();\n\n            dropdown.open = true;\n            dropdown.trigger.addClass('open');\n\n            function dropdown_shown() {\n                self.settings.on_dropdown_shown()\n            }\n        }\n\n        close(options) {\n            let self = this;\n            let dropdown = options.dropdown;\n\n            self.settings.on_dropdown_hide()\n\n            dropdown.menu_items_tl.timeScale(8);\n            dropdown.menu_items_tl.reverse();\n\n            TweenLite.to(dropdown.menu, self.settings.collapse_duration, {height: 0})\n\n            dropdown.open = false;\n            dropdown.trigger.removeClass('open');\n        }\n    }\n\n\n    $.fn.wpNav = function() {\n        let $this = this,\n            opt = arguments[0],\n            args = Array.prototype.slice.call(arguments, 1),\n            length = $this.length,\n            i,\n            ret;\n        for (i = 0; i < length; i++) {\n            if (typeof opt == 'object' || typeof opt == 'undefined')\n                $this[i].wp_nav = new WpNav($this[i], opt);\n            else\n                ret = $this[i].wp_nav[opt].apply($this[i].wp_nav, args);\n            if (typeof ret != 'undefined') return ret;\n        }\n        return $this;\n    };\n\n\n});"]}