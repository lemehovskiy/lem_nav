"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_createClass=function(){function n(n,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,a,o){return a&&n(e.prototype,a),o&&n(e,o),e}}();!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){var e=function(){function e(a,o){_classCallCheck(this,e);var t=this;t.nav={},t.nav.dropdowns=[],t.nav.navbar_open=!1,t.$navbar=n(a),t.settings=n.extend({navbar_toggle:".lem-navbar-toggle",collapse_duration:.2,trigger:"click",trigger_linked:!1,extra_trigger_button:"<button class='extra-trigger'><i class='icon icon-down-open-big'></i></button>",navbar_collapse_duration:.5,navbar_animation:"shift",submenu_animation:"fade",mobileBreakPoint:800},o),t.state={isSubmenuOpen:!1,currentOpenSubmenu:null},t.$submenuBackBtn=null,t.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.set_dropdowns_data(),e.is_touch_device()&&n("body").addClass("is-touch"),"fade"==e.settings.submenu_animation&&e.initBackToParent(),"click"==e.settings.trigger?(e.$navbar.addClass("trigger-click"),console.log(e.nav.dropdowns),e.nav.dropdowns.forEach(function(n){n.trigger.on("click",function(a){a.stopPropagation(),n.open?e.isDesktop()&&e.close({dropdown:n}):e.isDesktop()?(e.close_all(),e.close_other_branches(n.branch_id),e.openSubmenu({dropdown:n})):(console.log("asdf"),e.switchFadeSubmenu({dropdown:n}))})})):"hover"!=e.settings.trigger||e.is_touch_device()||e.nav.dropdowns.forEach(function(n){n.trigger.hover(function(){e.openSubmenu({dropdown:n})},function(){e.openSubmenu({dropdown:n})})}),e.settings.trigger_linked&&e.nav.dropdowns.forEach(function(n){n.extra_trigger.on("click",function(a){a.stopPropagation(),n.openSubmenu?e.close({dropdown:n}):(e.close_other_branches(n.branch_id),e.openSubMenu({dropdown:n}))})}),e.initNavbarCollapse()}},{key:"isDesktop",value:function(){return n(window).width()>this.settings.mobileBreakPoint}},{key:"initBackToParent",value:function(){var e=this;e.$submenuBackBtn=n('<li class="sub-menu-back-btn">Back</li>'),e.$navbar.find(".nav").prepend(e.$submenuBackBtn),e.$submenuBackBtn.on("click",function(){var n=e.state.currentOpenSubmenu.menu_lv,a=e.state.currentOpenSubmenu.branch_id;console.log(n),console.log(a),n>1?(console.log(n),console.log(a),e.nav.dropdowns.forEach(function(o){o.branch_id==a&&o.menu_lv==n-1&&e.openSubMenu({dropdown:o})})):(console.log("close"),e.nav.dropdowns.forEach(function(n){n.open&&(n.open=!1,n.nav_item.removeClass("open"))}),e.$navbar.removeClass("submenu-open"))})}},{key:"set_dropdowns_data",value:function(){function e(o){var t={nav_item:o.$nav_item,trigger:o.$nav_item,menu:o.$nav_item.find(">.sub-menu"),menu_items:o.$nav_item.find(">.sub-menu >li"),menu_lv:o.menu_lv,branch_id:o.branch_id,open:!1};return a.settings.trigger_linked&&(t.extra_trigger=a.extra_trigger(o.$nav_item)),o.$nav_item.find(">.sub-menu >.menu-item-has-children").each(function(){a.nav.dropdowns.push(e({$nav_item:n(this),menu_lv:o.menu_lv+1,branch_id:o.branch_id}))}),t}var a=this;a.$navbar.find(".nav >.menu-item-has-children").each(function(o){var t=e({$nav_item:n(this),menu_lv:1,branch_id:o});a.nav.dropdowns.push(t)})}},{key:"close_other_branches",value:function(n){var e=this;e.nav.dropdowns.forEach(function(a){a.open&&!a.branch_id==n&&e.close({dropdown:a})})}},{key:"initNavbarCollapse",value:function(){var e=this;e.nav.navbar_trigger=n(e.settings.navbar_toggle),e.nav.navbar_trigger.on("click",function(){e.nav.navbar_open?e.closeNavbar():e.openNavbar()})}},{key:"openNavbar",value:function(){var n=this;switch(n.settings.navbar_animation){case"shift":TweenLite.fromTo(n.$navbar,n.settings.navbar_collapse_duration,{autoAlpha:0,y:20},{autoAlpha:1,y:0});break;case"collapse":TweenLite.set(n.$navbar,{height:"auto"}),TweenLite.from(n.$navbar,n.settings.navbar_collapse_duration,{height:0})}n.nav.navbar_open=!0,n.nav.navbar_trigger.addClass("open")}},{key:"closeNavbar",value:function(){var n=this;switch(n.settings.navbar_animation){case"shift":TweenLite.to(n.$navbar,n.settings.navbar_collapse_duration,{autoAlpha:0,y:20}),n.$navbar.removeClass("submenu-open");break;case"collapse":TweenLite.to(n.$navbar,n.settings.navbar_collapse_duration,{height:0})}n.nav.navbar_open=!1,n.nav.navbar_trigger.removeClass("open")}},{key:"extra_trigger",value:function(e){var a=this,o=n(a.settings.extra_trigger_button);return e.append(o),o}},{key:"switchFadeSubmenu",value:function(n){function e(){o.menu.trigger("shown.lnav"),o.menu.trigger("show.lnav"),o.open=!0,o.nav_item.addClass("open"),a.state.currentOpenSubmenu=o}var a=this,o=n.dropdown;a.state.isSubmenuOpen||(a.state.isSubmenuOpen=!0,a.$navbar.addClass("submenu-open")),a.nav.dropdowns.forEach(function(n){o.branch_id==n.branch_id&&n.menu_lv<o.menu_lv?n.nav_item.addClass("nested-menu-open"):n.nav_item.removeClass("nested-menu-open")});var t=new TimelineLite;t.to(a.$navbar,.2,{scale:1.01,opacity:0,onComplete:function(){a.$navbar.addClass("submenu-open"),a.nav.dropdowns.forEach(function(n){n.nav_item.removeClass("open"),n.open=!0}),e()}}),t.to(a.$navbar,.2,{scale:1,opacity:1})}},{key:"openSubmenu",value:function(n){function e(){o.menu.trigger("shown.lnav")}var a=this,o=n.dropdown,t=o.menu.outerHeight();TweenLite.set(o.menu,{height:"auto"}),TweenLite.from(o.menu,a.settings.collapse_duration,{height:t,onComplete:e}),o.menu.trigger("show.lnav"),o.open=!0,o.nav_item.addClass("open")}},{key:"close_all",value:function(){var n=this;n.nav.dropdowns.forEach(function(e){e.open&&n.close({dropdown:e})})}},{key:"close",value:function(n){function e(){o.menu.trigger("hidden.lnav")}var a=this,o=n.dropdown;TweenLite.to(o.menu,a.settings.collapse_duration,{height:0,onComplete:e}),o.menu.trigger("hide.lnav"),o.open=!1,o.nav_item.removeClass("open")}},{key:"is_touch_device",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(n){return!1}}}]),e}();n.fn.lemNav=function(){var n=this,a=arguments[0],o=Array.prototype.slice.call(arguments,1),t=n.length,r=void 0,i=void 0;for(r=0;r<t;r++)if("object"==(void 0===a?"undefined":_typeof(a))||void 0===a?n[r].lem_nav=new e(n[r],a):i=n[r].lem_nav[a].apply(n[r].lem_nav,o),void 0!==i)return i;return n}});
//# sourceMappingURL=lem_nav.min.js.map
