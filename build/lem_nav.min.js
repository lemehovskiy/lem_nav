"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var n=function(){function n(t,a){_classCallCheck(this,n);var o=this;o.nav={},o.nav.dropdowns=[],o.nav.navbar_open=!1,o.$navbar=e(t),o.settings=e.extend({navbar_toggle:".lem-navbar-toggle",collapse_duration:.2,trigger:"click",trigger_linked:!1,extra_trigger_button:"<button class='extra-trigger'><i class='icon icon-down-open-big'></i></button>",navbar_collapse_duration:.5,navbar_animation:"shift",submenu_animation:"fade",mobileBreakPoint:800},a),o.state={isSubmenuOpen:!1,currentOpenSubmenu:null,sizeMode:null},o.$submenuBackBtn=null,o.init()}return _createClass(n,[{key:"init",value:function(){var n=this;this.set_dropdowns_data(),n.is_touch_device()&&e("body").addClass("is-touch"),this.resize(),this.resizeHandler(),"fade"==n.settings.submenu_animation&&n.initBackToParent(),"click"==n.settings.trigger?(n.$navbar.addClass("trigger-click"),e(window).click(function(){n.isDesktop()&&n.close_all()}),n.nav.dropdowns.forEach(function(e){e.trigger.on("click",function(t){t.stopPropagation(),n.isDesktop()?e.open?n.close({dropdown:e}):(n.close_other_branches(e.branch_id),n.openSubmenu({dropdown:e})):n.switchFadeSubmenu({dropdown:e})})})):"hover"!=n.settings.trigger||n.is_touch_device()||n.nav.dropdowns.forEach(function(e){e.trigger.hover(function(){n.openSubmenu({dropdown:e})},function(){n.openSubmenu({dropdown:e})})}),n.settings.trigger_linked&&n.nav.dropdowns.forEach(function(e){e.extra_trigger.on("click",function(t){t.stopPropagation(),e.openSubmenu?n.close({dropdown:e}):(n.close_other_branches(e.branch_id),n.openSubMenu({dropdown:e}))})}),n.initNavbarCollapse()}},{key:"resizeHandler",value:function(){var n=this;e(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){n.resize()},500)})}},{key:"resize",value:function(){e(window).width()>this.settings.mobileBreakPoint?this.updateSizeMode("desktop"):this.updateSizeMode("mobile")}},{key:"updateSizeMode",value:function(e){e!=this.state.sizeMode&&(this.state.sizeMode=e,this.close_all())}},{key:"isDesktop",value:function(){return e(window).width()>this.settings.mobileBreakPoint}},{key:"initBackToParent",value:function(){var n=this;n.$submenuBackBtn=e('<li class="sub-menu-back-btn">Back</li>'),n.$navbar.find(".nav").prepend(n.$submenuBackBtn),n.$submenuBackBtn.on("click",function(){var e=n.state.currentOpenSubmenu.menu_lv,t=n.state.currentOpenSubmenu.branch_id;e>1?n.nav.dropdowns.forEach(function(a){a.branch_id==t&&a.menu_lv==e-1&&n.switchFadeSubmenu({dropdown:a})}):n.closeFadeSubmenu()})}},{key:"closeFadeSubmenu",value:function(){var e=this,n=new TimelineLite;n.to(e.$navbar,.2,{scale:1.02,opacity:0,onComplete:function(){e.nav.dropdowns.forEach(function(e){e.open&&(e.open=!1,e.nav_item.removeClass("open"))}),e.$navbar.removeClass("submenu-open")}}),n.to(e.$navbar,.2,{scale:1,opacity:1})}},{key:"set_dropdowns_data",value:function(){function n(a){var o={nav_item:a.$nav_item,trigger:a.$nav_item,menu:a.$nav_item.find(">.sub-menu"),menu_items:a.$nav_item.find(">.sub-menu >li"),menu_lv:a.menu_lv,branch_id:a.branch_id,open:!1};return t.settings.trigger_linked&&(o.extra_trigger=t.extra_trigger(a.$nav_item)),a.$nav_item.find(">.sub-menu >.menu-item-has-children").each(function(){t.nav.dropdowns.push(n({$nav_item:e(this),menu_lv:a.menu_lv+1,branch_id:a.branch_id}))}),o}var t=this;t.$navbar.find(".nav >.menu-item-has-children").each(function(a){var o=n({$nav_item:e(this),menu_lv:1,branch_id:a});t.nav.dropdowns.push(o)})}},{key:"close_other_branches",value:function(e){var n=this;n.nav.dropdowns.forEach(function(t){t.open&&!t.branch_id==e&&n.close({dropdown:t})})}},{key:"initNavbarCollapse",value:function(){var n=this;n.nav.navbar_trigger=e(n.settings.navbar_toggle),n.nav.navbar_trigger.on("click",function(){n.nav.navbar_open?n.closeNavbar():n.openNavbar()})}},{key:"openNavbar",value:function(){var e=this;switch(e.settings.navbar_animation){case"shift":TweenLite.fromTo(e.$navbar,e.settings.navbar_collapse_duration,{autoAlpha:0,y:20},{autoAlpha:1,y:0});break;case"collapse":TweenLite.set(e.$navbar,{height:"auto"}),TweenLite.from(e.$navbar,e.settings.navbar_collapse_duration,{height:0})}e.nav.navbar_open=!0,e.nav.navbar_trigger.addClass("open")}},{key:"closeNavbar",value:function(){var e=this;switch(e.close_all(),e.settings.navbar_animation){case"shift":TweenLite.to(e.$navbar,e.settings.navbar_collapse_duration,{autoAlpha:0,y:20,onComplete:function(){e.$navbar.removeClass("submenu-open")}});break;case"collapse":TweenLite.to(e.$navbar,e.settings.navbar_collapse_duration,{height:0})}e.nav.navbar_open=!1,e.nav.navbar_trigger.removeClass("open")}},{key:"extra_trigger",value:function(n){var t=this,a=e(t.settings.extra_trigger_button);return n.append(a),a}},{key:"switchFadeSubmenu",value:function(e){function n(){a.menu.trigger("shown.lnav"),a.menu.trigger("show.lnav"),a.open=!0,a.nav_item.addClass("open"),t.state.currentOpenSubmenu=a}var t=this,a=e.dropdown;t.state.isSubmenuOpen||(t.state.isSubmenuOpen=!0),t.nav.dropdowns.forEach(function(e){a.branch_id==e.branch_id&&e.menu_lv<a.menu_lv?e.nav_item.addClass("nested-menu-open"):e.nav_item.removeClass("nested-menu-open")});var o=new TimelineLite;o.to(t.$navbar,.2,{scale:1.02,opacity:0,onComplete:function(){t.$navbar.addClass("submenu-open"),t.nav.dropdowns.forEach(function(e){e.nav_item.removeClass("open"),e.open=!0}),n()}}),o.to(t.$navbar,.2,{scale:1,opacity:1})}},{key:"openSubmenu",value:function(e){function n(){a.menu.trigger("shown.lnav")}var t=this,a=e.dropdown,o=a.menu.outerHeight();TweenLite.set(a.menu,{height:"auto"}),TweenLite.from(a.menu,t.settings.collapse_duration,{height:o,onComplete:n}),a.menu.trigger("show.lnav"),a.open=!0,a.nav_item.addClass("open")}},{key:"close_all",value:function(){var e=this;e.nav.dropdowns.forEach(function(n){n.open&&(e.close({dropdown:n}),n.open=!1,n.nav_item.removeClass("open"))}),e.$navbar.removeClass("submenu-open")}},{key:"close",value:function(e){function n(){a.menu.trigger("hidden.lnav")}var t=this,a=e.dropdown;TweenLite.to(a.menu,t.settings.collapse_duration,{height:0,onComplete:n}),a.menu.trigger("hide.lnav"),a.open=!1,a.nav_item.removeClass("open")}},{key:"is_touch_device",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}}]),n}();e.fn.lemNav=function(){var e=this,t=arguments[0],a=Array.prototype.slice.call(arguments,1),o=e.length,i=void 0,r=void 0;for(i=0;i<o;i++)if("object"==(void 0===t?"undefined":_typeof(t))||void 0===t?e[i].lem_nav=new n(e[i],t):r=e[i].lem_nav[t].apply(e[i].lem_nav,a),void 0!==r)return r;return e}});
//# sourceMappingURL=lem_nav.min.js.map
