"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_createClass=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){var e=function(){function e(t,a){_classCallCheck(this,e);var o=this;o.nav={},o.nav.dropdowns=[],o.nav.navbar_open=!1,o.$navbar=n(t),o.settings=n.extend({navbar_toggle:".lem-navbar-toggle",collapse_duration:.2,trigger:"click",trigger_linked:!1,extra_trigger_button:"<button class='extra-trigger'><i class='icon icon-down-open-big'></i></button>",navbar_collapse_duration:.5,navbar_animation:"shift",submenu_animation:"fade"},a),o.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.set_dropdowns_data(),e.is_touch_device()&&n("body").addClass("is-touch"),"click"==e.settings.trigger?(e.$navbar.addClass("trigger-click"),n(window).click(function(){e.close_all()}),e.nav.dropdowns.forEach(function(n){n.trigger.on("click",function(t){t.stopPropagation(),n.open?e.close({dropdown:n}):(e.close_all(),e.close_other_branches(n.branch_id),e.open({dropdown:n}))})})):"hover"!=e.settings.trigger||e.is_touch_device()||e.nav.dropdowns.forEach(function(n){n.trigger.hover(function(){e.open({dropdown:n})},function(){e.close({dropdown:n})})}),e.settings.trigger_linked&&e.nav.dropdowns.forEach(function(n){n.extra_trigger.on("click",function(t){t.stopPropagation(),n.open?e.close({dropdown:n}):(e.close_other_branches(n.branch_id),e.open({dropdown:n}))})}),e.initNavbarCollapse()}},{key:"set_dropdowns_data",value:function(){function e(a){var o={nav_item:a.$nav_item,trigger:a.$nav_item,menu:a.$nav_item.find(">.sub-menu"),menu_items:a.$nav_item.find(">.sub-menu >li"),menu_lv:a.menu_lv,branch_id:a.branch_id};return t.settings.trigger_linked&&(o.extra_trigger=t.extra_trigger(a.$nav_item)),a.$nav_item.find(">.sub-menu >.menu-item-has-children").each(function(){t.nav.dropdowns.push(e({$nav_item:n(this),menu_lv:a.menu_lv+1,branch_id:a.branch_id}))}),o}var t=this;t.$navbar.find(".nav >.menu-item-has-children").each(function(a){var o=e({$nav_item:n(this),menu_lv:1,branch_id:a});t.nav.dropdowns.push(o)})}},{key:"close_other_branches",value:function(n){var e=this;e.nav.dropdowns.forEach(function(t){t.open&&!t.branch_id==n&&e.close({dropdown:t})})}},{key:"initNavbarCollapse",value:function(){var e=this;e.nav.navbar_trigger=n(e.settings.navbar_toggle),e.nav.navbar_trigger.on("click",function(){if(e.nav.navbar_open){switch(e.settings.navbar_animation){case"shift":TweenLite.to(e.$navbar,e.settings.navbar_collapse_duration,{autoAlpha:0,y:20});break;case"collapse":TweenLite.to(e.$navbar,e.settings.navbar_collapse_duration,{height:0})}e.nav.navbar_open=!1,e.nav.navbar_trigger.removeClass("open")}else{switch(e.settings.navbar_animation){case"shift":TweenLite.fromTo(e.$navbar,e.settings.navbar_collapse_duration,{autoAlpha:0,y:20},{autoAlpha:1,y:0});break;case"collapse":TweenLite.set(e.$navbar,{height:"auto"}),TweenLite.from(e.$navbar,e.settings.navbar_collapse_duration,{height:0})}e.nav.navbar_open=!0,e.nav.navbar_trigger.addClass("open")}})}},{key:"extra_trigger",value:function(e){var t=this,a=n(t.settings.extra_trigger_button);return e.append(a),a}},{key:"open",value:function(n){function e(){a.menu.trigger("shown.lnav")}var t=this,a=n.dropdown,o=a.menu.outerHeight();switch(t.settings.submenu_animation){case"fade":console.log("asdf");break;case"collapse":TweenLite.set(a.menu,{height:"auto"}),TweenLite.from(a.menu,t.settings.collapse_duration,{height:o,onComplete:e})}a.menu.trigger("show.lnav"),a.open=!0,a.nav_item.addClass("open")}},{key:"close_all",value:function(){var n=this;n.nav.dropdowns.forEach(function(e){e.open&&n.close({dropdown:e})})}},{key:"close",value:function(n){var e=n.dropdown;e.menu.trigger("hide.lnav"),e.open=!1,e.nav_item.removeClass("open")}},{key:"is_touch_device",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(n){return!1}}}]),e}();n.fn.lemNav=function(){var n=this,t=arguments[0],a=Array.prototype.slice.call(arguments,1),o=n.length,r=void 0,i=void 0;for(r=0;r<o;r++)if("object"==(void 0===t?"undefined":_typeof(t))||void 0===t?n[r].lem_nav=new e(n[r],t):i=n[r].lem_nav[t].apply(n[r].lem_nav,a),void 0!==i)return i;return n}});
//# sourceMappingURL=lem_nav.min.js.map
